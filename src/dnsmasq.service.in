# It's not recommended to modify this file in-place, because it will be
# overwritten during upgrades.  If you want to customize, the best
# way is to create a file "/etc/systemd/system/dnsmasq.service",
# containing
#   .include /lib/systemd/system/dnsmasq.service
#   ...make your changes here...
# See https://www.freedesktop.org/software/systemd/man/systemd.service.html
# for detailed information about available options.

[Unit]
Description=A lightweight DHCP and caching DNS server
After=network.target

[Service]
BusName=uk.org.thekelleys.dnsmasq
PIDFile=/run/dnsmasq/dnsmasq.pid
ExecStartPre=@bindir@/dnsmasq --test
ExecStart=@bindir@/dnsmasq @dbusopts@ -k -x /run/dnsmasq/dnsmasq.pid --user=dnsmasq --group=dnsmasq
ExecReload=/bin/kill -HUP $MAINPID
RuntimeDirectory=dnsmasq
CapabilityBoundingSet=CAP_NET_BIND_SERVICE CAP_NET_ADMIN
AmbientCapabilities=CAP_NET_BIND_SERVICE CAP_NET_ADMIN
PrivateTmp=yes
PrivateDevices=yes
ProtectSystem=full
ProtectHome=yes
NoNewPrivileges=yes

[Install]
WantedBy=multi-user.target

